{"ast":null,"code":"var _jsxFileName = \"/Users/nassim/Desktop/projectbooking/client/src/components/auth/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Avatar, CssBaseline, Link, Box, Typography, makeStyles, Container } from '@material-ui/core';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'; //\n\nimport { loginUser } from '../../redux/actions/userAction';\nimport LoginForm from '../forms/LoginForm'; // import axios from 'axios';\n\nimport { useDispatch } from 'react-redux';\nimport { toast } from 'react-toastify';\n\nfunction Copyright() {\n  return /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 5\n    }\n  }, 'Copyright © ', /*#__PURE__*/React.createElement(Link, {\n    color: \"inherit\",\n    href: \"https://Travely.com/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }\n  }, \"Travely\"), ' ', new Date().getFullYear(), '.');\n}\n\n_c = Copyright;\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\n\nconst Login = ({\n  history\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const dispatch = useDispatch();\n\n  const handleSubmit = async e => {\n    e.preventDefault(); // console.log('SEND LOGIN DATA', { email, password });\n\n    try {\n      let res = await loginUser({\n        email,\n        password\n      });\n\n      if (res.data) {\n        // console.log('SAVE USER RES IN REDUX AND LOCAL STORAGE THEN REDIRECT ===> ');\n        // console.log(res.data);\n        // save user and token to local storage\n        window.localStorage.setItem('auth', JSON.stringify(res.data)); //save user and token to redux\n\n        dispatch({\n          type: 'LOGGED_IN_USER',\n          payload: res.data\n        });\n        history.push('/dashboard');\n      }\n    } catch (err) {\n      // console.log(err);\n      if (err.response.status === 400) toast.error(err.response.data);\n      history.push('/register');\n    }\n  };\n\n  const handleChangeemail = e => {\n    setEmail(e.target.value);\n  };\n\n  const handleChangepass = e => {\n    setPassword(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: classes.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LockOutlinedIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, \"Log In\"), /*#__PURE__*/React.createElement(LoginForm, {\n    handleSubmit: handleSubmit,\n    handleChangeemail: handleChangeemail,\n    handleChangepass: handleChangepass,\n    email: email,\n    password: password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    mt: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Copyright, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  })));\n};\n\n_s(Login, \"eEwRq25ca/1W8pIIfo1DIQ0ifrw=\", false, function () {\n  return [useStyles, useDispatch];\n});\n\n_c2 = Login;\nexport default Login;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Copyright\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["/Users/nassim/Desktop/projectbooking/client/src/components/auth/Login.js"],"names":["React","useState","Avatar","CssBaseline","Link","Box","Typography","makeStyles","Container","LockOutlinedIcon","loginUser","LoginForm","useDispatch","toast","Copyright","Date","getFullYear","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Login","history","classes","email","setEmail","password","setPassword","dispatch","handleSubmit","e","preventDefault","res","data","window","localStorage","setItem","JSON","stringify","type","payload","push","err","response","status","error","handleChangeemail","target","value","handleChangepass"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {\n  Avatar,\n  CssBaseline,\n  Link,\n  Box,\n  Typography,\n  makeStyles,\n  Container,\n} from '@material-ui/core';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\n//\nimport { loginUser } from '../../redux/actions/userAction';\nimport LoginForm from '../forms/LoginForm';\n// import axios from 'axios';\nimport { useDispatch } from 'react-redux';\nimport { toast } from 'react-toastify';\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://Travely.com/\">\n        Travely\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nconst Login = ({ history }) => {\n  const classes = useStyles();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const dispatch = useDispatch();\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // console.log('SEND LOGIN DATA', { email, password });\n    try {\n      let res = await loginUser({ email, password });\n\n      if (res.data) {\n        // console.log('SAVE USER RES IN REDUX AND LOCAL STORAGE THEN REDIRECT ===> ');\n        // console.log(res.data);\n        // save user and token to local storage\n        window.localStorage.setItem('auth', JSON.stringify(res.data));\n\n        //save user and token to redux\n        dispatch({\n          type: 'LOGGED_IN_USER',\n          payload: res.data,\n        });\n        history.push('/dashboard');\n      }\n    } catch (err) {\n      // console.log(err);\n      if (err.response.status === 400) toast.error(err.response.data);\n      history.push('/register');\n    }\n  };\n  const handleChangeemail = (e) => {\n    setEmail(e.target.value);\n  };\n  const handleChangepass = (e) => {\n    setPassword(e.target.value);\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n\n        <Typography component=\"h1\" variant=\"h5\">\n          Log In\n        </Typography>\n        <LoginForm\n          handleSubmit={handleSubmit}\n          handleChangeemail={handleChangeemail}\n          handleChangepass={handleChangepass}\n          email={email}\n          password={password}\n        />\n      </div>\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n    </Container>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}