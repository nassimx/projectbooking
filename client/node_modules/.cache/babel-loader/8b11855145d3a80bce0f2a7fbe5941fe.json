{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\booking2\\\\client\\\\src\\\\components\\\\auth\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Avatar, CssBaseline, Link, Box, Typography, makeStyles, Container } from '@material-ui/core';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'; //\n\nimport { loginUser } from '../../redux/actions/userAction';\nimport LoginForm from '../forms/LoginForm'; // import axios from 'axios';\n\nimport { useDispatch } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Copyright() {\n  return /*#__PURE__*/_jsxDEV(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    children: ['Copyright © ', /*#__PURE__*/_jsxDEV(Link, {\n      color: \"inherit\",\n      href: \"https://Travely.com/\",\n      children: \"Travely\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), ' ', new Date().getFullYear(), '.']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Copyright;\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\n\nconst Login = ({\n  history\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const dispatch = useDispatch();\n\n  const handleSubmit = async e => {\n    e.preventDefault(); // console.log('SEND LOGIN DATA', { email, password });\n\n    try {\n      let res = await loginUser({\n        email,\n        password\n      });\n\n      if (res.data) {\n        // console.log('SAVE USER RES IN REDUX AND LOCAL STORAGE THEN REDIRECT ===> ');\n        // console.log(res.data);\n        // save user and token to local storage\n        window.localStorage.setItem('auth', JSON.stringify(res.data)); //save user and token to redux\n\n        dispatch({\n          type: 'LOGGED_IN_USER',\n          payload: res.data\n        });\n        history.push('/dashboard');\n      }\n    } catch (err) {\n      // console.log(err);\n      if (err.response.status === 400) toast.error(err.response.data);\n      history.push('/register');\n    }\n  };\n\n  const handleChangeemail = e => {\n    setEmail(e.target.value);\n  };\n\n  const handleChangepass = e => {\n    setPassword(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.paper,\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        className: classes.avatar,\n        children: /*#__PURE__*/_jsxDEV(LockOutlinedIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h1\",\n        variant: \"h5\",\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginForm, {\n        handleSubmit: handleSubmit,\n        handleChangeemail: handleChangeemail,\n        handleChangepass: handleChangepass,\n        email: email,\n        password: password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 8,\n      children: /*#__PURE__*/_jsxDEV(Copyright, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"eEwRq25ca/1W8pIIfo1DIQ0ifrw=\", false, function () {\n  return [useStyles, useDispatch];\n});\n\n_c2 = Login;\nexport default Login;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Copyright\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["C:/Users/Admin/Desktop/booking2/client/src/components/auth/Login.js"],"names":["React","useState","Avatar","CssBaseline","Link","Box","Typography","makeStyles","Container","LockOutlinedIcon","loginUser","LoginForm","useDispatch","toast","Copyright","Date","getFullYear","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Login","history","classes","email","setEmail","password","setPassword","dispatch","handleSubmit","e","preventDefault","res","data","window","localStorage","setItem","JSON","stringify","type","payload","push","err","response","status","error","handleChangeemail","target","value","handleChangepass"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SACEC,MADF,EAEEC,WAFF,EAGEC,IAHF,EAIEC,GAJF,EAKEC,UALF,EAMEC,UANF,EAOEC,SAPF,QAQO,mBARP;AASA,OAAOC,gBAAP,MAA6B,iCAA7B,C,CACA;;AACA,SAASC,SAAT,QAA0B,gCAA1B;AACA,OAAOC,SAAP,MAAsB,oBAAtB,C,CACA;;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,KAAT,QAAsB,gBAAtB;;;AAEA,SAASC,SAAT,GAAqB;AACnB,sBACE,QAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAC,eAAlC;AAAkD,IAAA,KAAK,EAAC,QAAxD;AAAA,eACG,cADH,eAEE,QAAC,IAAD;AAAM,MAAA,KAAK,EAAC,SAAZ;AAAsB,MAAA,IAAI,EAAC,sBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,EAIU,GAJV,EAKG,IAAIC,IAAJ,GAAWC,WAAX,EALH,EAMG,GANH;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAUD;;KAXQF,S;AAaT,MAAMG,SAAS,GAAGV,UAAU,CAAEW,KAAD,KAAY;AACvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,SAAS,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADN;AAELC,IAAAA,OAAO,EAAE,MAFJ;AAGLC,IAAAA,aAAa,EAAE,QAHV;AAILC,IAAAA,UAAU,EAAE;AAJP,GADgC;AAOvCC,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EAAER,KAAK,CAACG,OAAN,CAAc,CAAd,CADF;AAENM,IAAAA,eAAe,EAAET,KAAK,CAACU,OAAN,CAAcC,SAAd,CAAwBC;AAFnC,GAP+B;AAWvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAE,MADH;AACW;AACfZ,IAAAA,SAAS,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AAFP,GAXiC;AAevCY,EAAAA,MAAM,EAAE;AACNP,IAAAA,MAAM,EAAER,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AADF;AAf+B,CAAZ,CAAD,CAA5B;;AAoBA,MAAMa,KAAK,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAAA;;AAC7B,QAAMC,OAAO,GAAGnB,SAAS,EAAzB;AAEA,QAAM,CAACoB,KAAD,EAAQC,QAAR,IAAoBrC,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACsC,QAAD,EAAWC,WAAX,IAA0BvC,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAMwC,QAAQ,GAAG7B,WAAW,EAA5B;;AACA,QAAM8B,YAAY,GAAG,MAAOC,CAAP,IAAa;AAChCA,IAAAA,CAAC,CAACC,cAAF,GADgC,CAEhC;;AACA,QAAI;AACF,UAAIC,GAAG,GAAG,MAAMnC,SAAS,CAAC;AAAE2B,QAAAA,KAAF;AAASE,QAAAA;AAAT,OAAD,CAAzB;;AAEA,UAAIM,GAAG,CAACC,IAAR,EAAc;AACZ;AACA;AACA;AACAC,QAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,EAAoCC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACC,IAAnB,CAApC,EAJY,CAMZ;;AACAL,QAAAA,QAAQ,CAAC;AACPW,UAAAA,IAAI,EAAE,gBADC;AAEPC,UAAAA,OAAO,EAAER,GAAG,CAACC;AAFN,SAAD,CAAR;AAIAX,QAAAA,OAAO,CAACmB,IAAR,CAAa,YAAb;AACD;AACF,KAhBD,CAgBE,OAAOC,GAAP,EAAY;AACZ;AACA,UAAIA,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC5C,KAAK,CAAC6C,KAAN,CAAYH,GAAG,CAACC,QAAJ,CAAaV,IAAzB;AACjCX,MAAAA,OAAO,CAACmB,IAAR,CAAa,WAAb;AACD;AACF,GAxBD;;AAyBA,QAAMK,iBAAiB,GAAIhB,CAAD,IAAO;AAC/BL,IAAAA,QAAQ,CAACK,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAR;AACD,GAFD;;AAGA,QAAMC,gBAAgB,GAAInB,CAAD,IAAO;AAC9BH,IAAAA,WAAW,CAACG,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAX;AACD,GAFD;;AAIA,sBACE,QAAC,SAAD;AAAW,IAAA,SAAS,EAAC,MAArB;AAA4B,IAAA,QAAQ,EAAC,IAArC;AAAA,4BACE,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAEzB,OAAO,CAACjB,KAAxB;AAAA,8BACE,QAAC,MAAD;AAAQ,QAAA,SAAS,EAAEiB,OAAO,CAACX,MAA3B;AAAA,+BACE,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAKE,QAAC,UAAD;AAAY,QAAA,SAAS,EAAC,IAAtB;AAA2B,QAAA,OAAO,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,eAQE,QAAC,SAAD;AACE,QAAA,YAAY,EAAEiB,YADhB;AAEE,QAAA,iBAAiB,EAAEiB,iBAFrB;AAGE,QAAA,gBAAgB,EAAEG,gBAHpB;AAIE,QAAA,KAAK,EAAEzB,KAJT;AAKE,QAAA,QAAQ,EAAEE;AALZ;AAAA;AAAA;AAAA;AAAA,cARF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAkBE,QAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAA,6BACE,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAlBF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAwBD,CA9DD;;GAAML,K;UACYjB,S,EAICL,W;;;MALbsB,K;AAgEN,eAAeA,KAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Avatar,\r\n  CssBaseline,\r\n  Link,\r\n  Box,\r\n  Typography,\r\n  makeStyles,\r\n  Container,\r\n} from '@material-ui/core';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n//\r\nimport { loginUser } from '../../redux/actions/userAction';\r\nimport LoginForm from '../forms/LoginForm';\r\n// import axios from 'axios';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://Travely.com/\">\r\n        Travely\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nconst Login = ({ history }) => {\r\n  const classes = useStyles();\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const dispatch = useDispatch();\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // console.log('SEND LOGIN DATA', { email, password });\r\n    try {\r\n      let res = await loginUser({ email, password });\r\n\r\n      if (res.data) {\r\n        // console.log('SAVE USER RES IN REDUX AND LOCAL STORAGE THEN REDIRECT ===> ');\r\n        // console.log(res.data);\r\n        // save user and token to local storage\r\n        window.localStorage.setItem('auth', JSON.stringify(res.data));\r\n\r\n        //save user and token to redux\r\n        dispatch({\r\n          type: 'LOGGED_IN_USER',\r\n          payload: res.data,\r\n        });\r\n        history.push('/dashboard');\r\n      }\r\n    } catch (err) {\r\n      // console.log(err);\r\n      if (err.response.status === 400) toast.error(err.response.data);\r\n      history.push('/register');\r\n    }\r\n  };\r\n  const handleChangeemail = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n  const handleChangepass = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Log In\r\n        </Typography>\r\n        <LoginForm\r\n          handleSubmit={handleSubmit}\r\n          handleChangeemail={handleChangeemail}\r\n          handleChangepass={handleChangepass}\r\n          email={email}\r\n          password={password}\r\n        />\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}