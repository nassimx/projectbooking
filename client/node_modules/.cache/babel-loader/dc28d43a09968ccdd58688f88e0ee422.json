{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\booking2\\\\client\\\\src\\\\components\\\\booking\\\\ViewHotel.js\",\n    _s = $RefreshSig$();\n\nimport { Button } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { read } from '../../redux/actions/hotel';\nimport { getSessionId } from '../actions/stripe';\nimport { loadStripe } from '@stripe/stripe-js'; //\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ViewHotel = ({\n  match,\n  history\n}) => {\n  _s();\n\n  const [hotel, setHotel] = useState({});\n  const [image, setImage] = useState('');\n  const [loading, setLoading] = useState(false); // @ts-ignore\n\n  const {\n    auth\n  } = useSelector(state => ({ ...state\n  }));\n  useEffect(() => {\n    loadSellerHotel();\n  }, []);\n\n  const loadSellerHotel = async () => {\n    let res = await read(match.params.hotelId); // console.log(res);\n\n    setHotel(res.data);\n    setImage(`${process.env.REACT_APP_API}/hotel/image/${res.data._id}`);\n  };\n\n  const handleClick = async e => {\n    e.preventDefault();\n    setLoading(true);\n    if (!auth) history.push('/login'); // console.log(auth.token, match.params.hotelId);\n\n    let res = await getSessionId(auth.token, match.params.hotelId); // console.log('get sessionid resposne', res.data.sessionId);\n\n    const stripe = await loadStripe(process.env.REACT_APP_STRIPE_key);\n    stripe.redirectToCheckout({\n      sessionId: res.data.sessionId\n    }).then(result => console.log(result));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: hotel.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: hotel.content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: image,\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      children: hotel.price\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n      children: [\"Posted by \", hotel.postedBy && hotel.postedBy.firstname, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleClick,\n      disabled: loading,\n      children: loading ? 'Loading ...' : auth && auth.token ? 'Book Now' : 'Login to Book'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ViewHotel, \"ZubxPLuGqa7mlz4bPQcYqfe5eS0=\", false, function () {\n  return [useSelector];\n});\n\n_c = ViewHotel;\nexport default ViewHotel;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewHotel\");","map":{"version":3,"sources":["C:/Users/Admin/Desktop/booking2/client/src/components/booking/ViewHotel.js"],"names":["Button","React","useEffect","useState","useSelector","read","getSessionId","loadStripe","ViewHotel","match","history","hotel","setHotel","image","setImage","loading","setLoading","auth","state","loadSellerHotel","res","params","hotelId","data","process","env","REACT_APP_API","_id","handleClick","e","preventDefault","push","token","stripe","REACT_APP_STRIPE_key","redirectToCheckout","sessionId","then","result","console","log","title","content","price","postedBy","firstname"],"mappings":"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","sourcesContent":["import { Button } from '@material-ui/core';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { read } from '../../redux/actions/hotel';\r\nimport { getSessionId } from '../actions/stripe';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n//\r\nconst ViewHotel = ({ match, history }) => {\r\n  const [hotel, setHotel] = useState({});\r\n  const [image, setImage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // @ts-ignore\r\n  const { auth } = useSelector((state) => ({ ...state }));\r\n  useEffect(() => {\r\n    loadSellerHotel();\r\n  }, []);\r\n  const loadSellerHotel = async () => {\r\n    let res = await read(match.params.hotelId);\r\n    // console.log(res);\r\n    setHotel(res.data);\r\n    setImage(`${process.env.REACT_APP_API}/hotel/image/${res.data._id}`);\r\n  };\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    if (!auth) history.push('/login');\r\n    // console.log(auth.token, match.params.hotelId);\r\n    let res = await getSessionId(auth.token, match.params.hotelId);\r\n    // console.log('get sessionid resposne', res.data.sessionId);\r\n    const stripe = await loadStripe(process.env.REACT_APP_STRIPE_key);\r\n    stripe\r\n      .redirectToCheckout({\r\n        sessionId: res.data.sessionId,\r\n      })\r\n      .then((result) => console.log(result));\r\n  };\r\n  return (\r\n    <div>\r\n      <h1>{hotel.title}</h1>\r\n      <h3>{hotel.content}</h3>\r\n      <img src={image} alt=\"\" />\r\n      <h5>{hotel.price}</h5>\r\n      <i>Posted by {hotel.postedBy && hotel.postedBy.firstname} </i>\r\n      <br />\r\n      <Button onClick={handleClick} disabled={loading}>\r\n        {loading\r\n          ? 'Loading ...'\r\n          : auth && auth.token\r\n          ? 'Book Now'\r\n          : 'Login to Book'}\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewHotel;\r\n"]},"metadata":{},"sourceType":"module"}