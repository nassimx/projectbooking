{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\booking2\\\\client\\\\src\\\\components\\\\User\\\\Stripe\\\\StripeCallback.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getAccountStatus } from '../../actions/stripe';\nimport { updateUserInLocalStorage } from '../../actions/auth';\nimport Box from '@material-ui/core/Box'; //\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst StripeCallback = ({\n  history\n}) => {\n  _s();\n\n  const {\n    auth\n  } = useSelector(state => ({ ...state\n  }));\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (auth && auth.token) accountStatus(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [auth]);\n\n  const accountStatus = async () => {\n    try {\n      const res = await getAccountStatus(auth.token); // console.log('USER ACCOUNT STATUS ON STRIPE CALLBACK', res);\n      //update User In Local Storage\n\n      updateUserInLocalStorage(res.data, () => {\n        // update user in redux\n        dispatch({\n          type: 'LOGGED_IN_USER',\n          payload: res.data\n        });\n      }); // redirect user to dashboard\n\n      window.location.href = '/dashboard';\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    minHeight: \"50vh\",\n    children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n\n_s(StripeCallback, \"DVrTCWdgDiqam44Ocqm3V+hCEiM=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = StripeCallback;\nexport default StripeCallback;\n\nvar _c;\n\n$RefreshReg$(_c, \"StripeCallback\");","map":{"version":3,"sources":["C:/Users/Admin/Desktop/booking2/client/src/components/User/Stripe/StripeCallback.js"],"names":["useEffect","CircularProgress","useSelector","useDispatch","getAccountStatus","updateUserInLocalStorage","Box","StripeCallback","history","auth","state","dispatch","token","accountStatus","res","data","type","payload","window","location","href","err","console","log"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,SAASC,wBAAT,QAAyC,oBAAzC;AACA,OAAOC,GAAP,MAAgB,uBAAhB,C,CAEA;;;;AAEA,MAAMC,cAAc,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAAA;;AACtC,QAAM;AAAEC,IAAAA;AAAF,MAAWP,WAAW,CAAEQ,KAAD,KAAY,EAAE,GAAGA;AAAL,GAAZ,CAAD,CAA5B;AACA,QAAMC,QAAQ,GAAGR,WAAW,EAA5B;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIS,IAAI,IAAIA,IAAI,CAACG,KAAjB,EAAwBC,aAAa,GADvB,CAEd;AACD,GAHQ,EAGN,CAACJ,IAAD,CAHM,CAAT;;AAKA,QAAMI,aAAa,GAAG,YAAY;AAChC,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMV,gBAAgB,CAACK,IAAI,CAACG,KAAN,CAAlC,CADE,CAEF;AACA;;AACAP,MAAAA,wBAAwB,CAACS,GAAG,CAACC,IAAL,EAAW,MAAM;AACvC;AACAJ,QAAAA,QAAQ,CAAC;AAAEK,UAAAA,IAAI,EAAE,gBAAR;AAA0BC,UAAAA,OAAO,EAAEH,GAAG,CAACC;AAAvC,SAAD,CAAR;AACD,OAHuB,CAAxB,CAJE,CAQF;;AACAG,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,YAAvB;AACD,KAVD,CAUE,OAAOC,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AACF,GAdD;;AAgBA,sBACE,QAAC,GAAD;AACE,IAAA,OAAO,EAAC,MADV;AAEE,IAAA,cAAc,EAAC,QAFjB;AAGE,IAAA,UAAU,EAAC,QAHb;AAIE,IAAA,SAAS,EAAC,MAJZ;AAAA,2BAME,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,UADF;AAUD,CAnCD;;GAAMd,c;UACaL,W,EACAC,W;;;KAFbI,c;AAqCN,eAAeA,cAAf","sourcesContent":["import { useEffect } from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { getAccountStatus } from '../../actions/stripe';\r\nimport { updateUserInLocalStorage } from '../../actions/auth';\r\nimport Box from '@material-ui/core/Box';\r\n\r\n//\r\n\r\nconst StripeCallback = ({ history }) => {\r\n  const { auth } = useSelector((state) => ({ ...state }));\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (auth && auth.token) accountStatus();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [auth]);\r\n\r\n  const accountStatus = async () => {\r\n    try {\r\n      const res = await getAccountStatus(auth.token);\r\n      // console.log('USER ACCOUNT STATUS ON STRIPE CALLBACK', res);\r\n      //update User In Local Storage\r\n      updateUserInLocalStorage(res.data, () => {\r\n        // update user in redux\r\n        dispatch({ type: 'LOGGED_IN_USER', payload: res.data });\r\n      });\r\n      // redirect user to dashboard\r\n      window.location.href = '/dashboard';\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      justifyContent=\"center\"\r\n      alignItems=\"center\"\r\n      minHeight=\"50vh\"\r\n    >\r\n      <CircularProgress />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default StripeCallback;\r\n"]},"metadata":{},"sourceType":"module"}