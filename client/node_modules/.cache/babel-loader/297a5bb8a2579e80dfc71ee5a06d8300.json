{"ast":null,"code":"var _jsxFileName = \"/Users/nassim/Desktop/projectbooking/client/src/components/booking/ViewHotel.js\",\n    _s = $RefreshSig$();\n\nimport { Button } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { read } from '../../redux/actions/hotel';\nimport { getSessionId } from '../actions/stripe';\nimport { loadStripe } from '@stripe/stripe-js'; //\n\nconst ViewHotel = ({\n  match,\n  history\n}) => {\n  _s();\n\n  const [hotel, setHotel] = useState({});\n  const [image, setImage] = useState('');\n  const [loading, setLoading] = useState(false); // @ts-ignore\n\n  const {\n    auth\n  } = useSelector(state => ({ ...state\n  }));\n  useEffect(() => {\n    loadSellerHotel();\n  }, []);\n\n  const loadSellerHotel = async () => {\n    let res = await read(match.params.hotelId); // console.log(res);\n\n    setHotel(res.data);\n    setImage(`${process.env.REACT_APP_API}/hotel/image/${res.data._id}`);\n  };\n\n  const handleClick = async e => {\n    e.preventDefault();\n    setLoading(true);\n    if (!auth) history.push('/login'); // console.log(auth.token, match.params.hotelId);\n\n    let res = await getSessionId(auth.token, match.params.hotelId); // console.log('get sessionid resposne', res.data.sessionId);\n\n    const stripe = await loadStripe(process.env.REACT_APP_STRIPE_key);\n    stripe.redirectToCheckout({\n      sessionId: res.data.sessionId\n    }).then(result => console.log(result));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, hotel.title), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, hotel.content), /*#__PURE__*/React.createElement(\"img\", {\n    src: image,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, hotel.price), /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, \"Posted by \", hotel.postedBy && hotel.postedBy.firstname, \" \"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClick,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, loading ? 'Loading ...' : auth && auth.token ? 'Book Now' : 'Login to Book'));\n};\n\n_s(ViewHotel, \"ZubxPLuGqa7mlz4bPQcYqfe5eS0=\", false, function () {\n  return [useSelector];\n});\n\n_c = ViewHotel;\nexport default ViewHotel;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewHotel\");","map":{"version":3,"sources":["/Users/nassim/Desktop/projectbooking/client/src/components/booking/ViewHotel.js"],"names":["Button","React","useEffect","useState","useSelector","read","getSessionId","loadStripe","ViewHotel","match","history","hotel","setHotel","image","setImage","loading","setLoading","auth","state","loadSellerHotel","res","params","hotelId","data","process","env","REACT_APP_API","_id","handleClick","e","preventDefault","push","token","stripe","REACT_APP_STRIPE_key","redirectToCheckout","sessionId","then","result","console","log","title","content","price","postedBy","firstname"],"mappings":";;;AAAA,SAASA,MAAT,QAAuB,mBAAvB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,IAAT,QAAqB,2BAArB;AACA,SAASC,YAAT,QAA6B,mBAA7B;AACA,SAASC,UAAT,QAA2B,mBAA3B,C,CACA;;AACA,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAD,KAAwB;AAAA;;AACxC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,KAAD,CAAtC,CAHwC,CAKxC;;AACA,QAAM;AAAEc,IAAAA;AAAF,MAAWb,WAAW,CAAEc,KAAD,KAAY,EAAE,GAAGA;AAAL,GAAZ,CAAD,CAA5B;AACAhB,EAAAA,SAAS,CAAC,MAAM;AACdiB,IAAAA,eAAe;AAChB,GAFQ,EAEN,EAFM,CAAT;;AAGA,QAAMA,eAAe,GAAG,YAAY;AAClC,QAAIC,GAAG,GAAG,MAAMf,IAAI,CAACI,KAAK,CAACY,MAAN,CAAaC,OAAd,CAApB,CADkC,CAElC;;AACAV,IAAAA,QAAQ,CAACQ,GAAG,CAACG,IAAL,CAAR;AACAT,IAAAA,QAAQ,CAAE,GAAEU,OAAO,CAACC,GAAR,CAAYC,aAAc,gBAAeN,GAAG,CAACG,IAAJ,CAASI,GAAI,EAA1D,CAAR;AACD,GALD;;AAOA,QAAMC,WAAW,GAAG,MAAOC,CAAP,IAAa;AAC/BA,IAAAA,CAAC,CAACC,cAAF;AACAd,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAI,CAACC,IAAL,EAAWP,OAAO,CAACqB,IAAR,CAAa,QAAb,EAHoB,CAI/B;;AACA,QAAIX,GAAG,GAAG,MAAMd,YAAY,CAACW,IAAI,CAACe,KAAN,EAAavB,KAAK,CAACY,MAAN,CAAaC,OAA1B,CAA5B,CAL+B,CAM/B;;AACA,UAAMW,MAAM,GAAG,MAAM1B,UAAU,CAACiB,OAAO,CAACC,GAAR,CAAYS,oBAAb,CAA/B;AACAD,IAAAA,MAAM,CACHE,kBADH,CACsB;AAClBC,MAAAA,SAAS,EAAEhB,GAAG,CAACG,IAAJ,CAASa;AADF,KADtB,EAIGC,IAJH,CAISC,MAAD,IAAYC,OAAO,CAACC,GAAR,CAAYF,MAAZ,CAJpB;AAKD,GAbD;;AAcA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK3B,KAAK,CAAC8B,KAAX,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK9B,KAAK,CAAC+B,OAAX,CAFF,eAGE;AAAK,IAAA,GAAG,EAAE7B,KAAV;AAAiB,IAAA,GAAG,EAAC,EAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKF,KAAK,CAACgC,KAAX,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAchC,KAAK,CAACiC,QAAN,IAAkBjC,KAAK,CAACiC,QAAN,CAAeC,SAA/C,MALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAOE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEjB,WAAjB;AAA8B,IAAA,QAAQ,EAAEb,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,OAAO,GACJ,aADI,GAEJE,IAAI,IAAIA,IAAI,CAACe,KAAb,GACA,UADA,GAEA,eALN,CAPF,CADF;AAiBD,CAhDD;;GAAMxB,S;UAMaJ,W;;;KANbI,S;AAkDN,eAAeA,SAAf","sourcesContent":["import { Button } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { read } from '../../redux/actions/hotel';\nimport { getSessionId } from '../actions/stripe';\nimport { loadStripe } from '@stripe/stripe-js';\n//\nconst ViewHotel = ({ match, history }) => {\n  const [hotel, setHotel] = useState({});\n  const [image, setImage] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // @ts-ignore\n  const { auth } = useSelector((state) => ({ ...state }));\n  useEffect(() => {\n    loadSellerHotel();\n  }, []);\n  const loadSellerHotel = async () => {\n    let res = await read(match.params.hotelId);\n    // console.log(res);\n    setHotel(res.data);\n    setImage(`${process.env.REACT_APP_API}/hotel/image/${res.data._id}`);\n  };\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    if (!auth) history.push('/login');\n    // console.log(auth.token, match.params.hotelId);\n    let res = await getSessionId(auth.token, match.params.hotelId);\n    // console.log('get sessionid resposne', res.data.sessionId);\n    const stripe = await loadStripe(process.env.REACT_APP_STRIPE_key);\n    stripe\n      .redirectToCheckout({\n        sessionId: res.data.sessionId,\n      })\n      .then((result) => console.log(result));\n  };\n  return (\n    <div>\n      <h1>{hotel.title}</h1>\n      <h3>{hotel.content}</h3>\n      <img src={image} alt=\"\" />\n      <h5>{hotel.price}</h5>\n      <i>Posted by {hotel.postedBy && hotel.postedBy.firstname} </i>\n      <br />\n      <Button onClick={handleClick} disabled={loading}>\n        {loading\n          ? 'Loading ...'\n          : auth && auth.token\n          ? 'Book Now'\n          : 'Login to Book'}\n      </Button>\n    </div>\n  );\n};\n\nexport default ViewHotel;\n"]},"metadata":{},"sourceType":"module"}